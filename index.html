<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CryptoSwap.live - Cosmetic Crypto Swap</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');

    :root {
      --bg-dark: #121214;
      --bg-darker: #0b0b0d;
      --accent: #8e44ad; /* purple */
      --accent-hover: #732d91;
      --text-light: #e1e1e6;
      --text-muted: #9a8cbf;
      --input-bg: #1e1e22;
      --input-border: #3a2a56;
      --swap-btn-bg: #8e44ad;
      --swap-btn-bg-hover: #732d91;
      --shadow: 0 0 15px rgba(142, 68, 173, 0.7);
      --error-bg: #8b0000;
      --error-text: #ffbaba;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background-color: var(--bg-dark);
      color: var(--text-light);
      min-height: 100vh;
      user-select: none;
      padding: 1rem 2rem;
    }

    main {
      max-width: 1200px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 3fr 1fr;
      gap: 2rem;
      min-height: 75vh;
    }

    /* LEFT/MAIN: swap + recent swaps stacked vertically */
    .left-main {
      display: flex;
      flex-direction: column;
      gap: 2rem;
    }

    /* Swap container */

    .swap-container {
      background: var(--bg-darker);
      padding: 2rem 2.5rem;
      border-radius: 14px;
      box-shadow: var(--shadow);
      user-select:none;
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
      max-width: 100%;
    }

    .swap-container h2 {
      margin-top: 0;
      font-weight: 700;
      font-size: 2rem;
      color: var(--accent);
      user-select:none;
    }

    form.swap-form {
      display: flex;
      flex-direction: column;
      gap: 1.3rem;
    }

    label {
      font-weight: 600;
      margin-bottom: 0.4rem;
      color: var(--text-muted);
      user-select:none;
    }

    select, input[type="number"], input[type="text"] {
      width: 100%;
      background: var(--input-bg);
      border: 2px solid var(--input-border);
      border-radius: 10px;
      padding: 0.9rem 1.3rem;
      color: var(--text-light);
      font-size: 1.15rem;
      font-weight: 600;
      transition: border-color 0.3s ease;
      font-family: 'Poppins', sans-serif;
      letter-spacing: 0.03em;
      user-select:text;
    }

    select:focus, input[type="number"]:focus, input[type="text"]:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 14px var(--accent);
    }

    button.swap-btn {
      margin-top: 2rem;
      padding: 1.1rem 0;
      background: var(--swap-btn-bg);
      border: none;
      color: #fff;
      font-weight: 700;
      font-size: 1.3rem;
      border-radius: 14px;
      cursor: pointer;
      box-shadow: var(--shadow);
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
      font-family: 'Poppins', sans-serif;
      letter-spacing: 0.05em;
      user-select:none;
    }

    button.swap-btn:hover:not(:disabled) {
      background: var(--accent-hover);
      box-shadow: 0 0 20px var(--accent-hover);
    }

    button.swap-btn:disabled {
      background: #5c427b;
      cursor: not-allowed;
      box-shadow: none;
    }

    .rate-display {
      margin-top: 1.7rem;
      font-weight: 700;
      font-size: 1.1rem;
      color: var(--text-muted);
      user-select:none;
      min-height: 1.4rem;
      letter-spacing: 0.03em;
    }

    /* Toggle for crypto/USD amount input */

    .amount-toggle {
      display: flex;
      gap: 1.5rem;
      font-weight: 600;
      user-select:none;
      color: var(--accent);
    }

    .amount-toggle label {
      cursor: pointer;
    }

    input[type="radio"] {
      margin-right: 0.3rem;
      cursor: pointer;
      accent-color: var(--accent);
      vertical-align: middle;
    }

    /* Recent swaps below swap */

    .history-container {
      background: var(--bg-darker);
      border-radius: 14px;
      box-shadow: var(--shadow);
      color: var(--text-light);
      user-select:none;
      overflow-x: auto;
      display: flex;
      flex-direction: column;
      padding: 1.5rem 1.5rem 1rem 1.5rem;
    }

    .history-container h3 {
      margin: 0 0 1rem 0;
      font-weight: 700;
      font-size: 1.5rem;
      color: var(--accent);
      user-select:none;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-variant-numeric: tabular-nums;
      min-width: 600px;
    }

    thead th {
      border-bottom: 3px solid var(--accent);
      color: var(--accent);
      padding: 0.75rem 1.2rem;
      text-align: left;
      font-weight: 600;
      user-select:none;
    }

    tbody tr {
      border-bottom: 1.3px solid #311a5d;
      transition: background-color 0.25s ease;
    }

    tbody tr:hover {
      background: #290f4a;
    }

    tbody td {
      color: var(--text-light);
      padding: 0.75rem 1.2rem;
      user-select:text;
      font-weight: 500;
    }

    /* Scrollbar styles for recent swaps */
    .history-container table::-webkit-scrollbar {
      width: 8px;
    }

    .history-container table::-webkit-scrollbar-track {
      background: #0b0b0d;
    }

    .history-container table::-webkit-scrollbar-thumb {
      background: var(--accent);
      border-radius: 6px;
    }

    /* RIGHT: Sidebar tabs */

    .right-side {
      background: var(--bg-darker);
      border-radius: 14px;
      box-shadow: var(--shadow);
      color: var(--text-light);
      user-select:none;
      display: flex;
      flex-direction: column;
      gap: 1rem;
      min-width: 280px;
      padding: 1.5rem 1.5rem 2rem 1.5rem;
      font-size: 0.95rem;
      line-height: 1.4;
      font-weight: 400;
    }

    .tabs {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .tab-btn {
      background: transparent;
      border: none;
      color: var(--accent);
      font-weight: 700;
      font-size: 1.1rem;
      cursor: pointer;
      text-align: left;
      padding: 0.75rem 1rem;
      border-radius: 8px;
      transition: background-color 0.3s ease;
      user-select:none;
      width: 100%;
    }

    .tab-btn:hover,
    .tab-btn.active {
      background: var(--accent-hover);
      color: #fff;
      box-shadow: 0 0 15px var(--accent-hover);
    }

    .tab-content {
      background: #1e1e22;
      border-radius: 12px;
      padding: 1rem 1rem;
      color: var(--text-light);
      font-weight: 400;
      font-size: 0.95rem;
      line-height: 1.4;
      display: none;
      user-select:text;
      min-height: 110px;
    }

    .tab-content.active {
      display: block;
    }

    /* Responsive */

    @media (max-width: 900px) {
      main {
        grid-template-columns: 1fr;
      }
      .right-side {
        min-width: auto;
        margin-top: 2rem;
      }
      .history-container table {
        min-width: auto;
      }
    }

    /* Modal styles */

    .modal-overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.7);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .modal {
      background: var(--bg-darker);
      padding: 2rem 2.5rem;
      border-radius: 14px;
      box-shadow: var(--shadow);
      width: 400px;
      max-width: 90vw;
      color: var(--text-light);
      user-select:none;
      position: relative;
      text-align: center;
      font-family: 'Poppins', sans-serif;
    }

    .modal h3 {
      margin-top: 0;
      margin-bottom: 1.3rem;
      font-weight: 700;
      font-size: 1.5rem;
      color: var(--accent);
      user-select:none;
    }

    .modal p {
      margin: 0.5rem 0 1.3rem 0;
      font-weight: 600;
      font-size: 1.15rem;
      word-break: break-word;
    }

    .modal button.close-btn {
      background: var(--accent);
      border: none;
      color: #fff;
      font-weight: 700;
      padding: 0.6rem 1.2rem;
      border-radius: 12px;
      cursor: pointer;
      font-size: 1rem;
      user-select:none;
      box-shadow: var(--shadow);
      transition: background-color 0.3s ease;
      letter-spacing: 0.05em;
    }

    .modal button.close-btn:hover {
      background: var(--accent-hover);
    }

    /* Error message box */

    .error-message {
      background: var(--error-bg);
      color: var(--error-text);
      border-radius: 12px;
      padding: 1rem 1.5rem;
      margin-top: 1rem;
      font-weight: 700;
      position: relative;
      user-select:none;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 0 10px var(--error-bg);
    }

    .error-message button.close-error {
      background: transparent;
      border: none;
      color: var(--error-text);
      font-weight: 900;
      font-size: 1.2rem;
      cursor: pointer;
      line-height: 1;
      padding: 0 0.4rem 0 0.4rem;
      user-select:none;
    }
  </style>
</head>
<body>

<main>
  <section class="left-main">
    <section class="swap-container" aria-label="Swap form">
      <h2>Swap Tokens</h2>
      <form class="swap-form" id="swap-form" autocomplete="off" novalidate>
        <div>
          <label for="from-token">From</label>
          <select id="from-token" name="from-token" required aria-required="true" aria-label="Select token to swap from">
            <option value="" disabled selected>Select token</option>
            <option value="BTC">Bitcoin (BTC)</option>
            <option value="ETH">Ethereum (ETH)</option>
            <option value="USDT">Tether (USDT)</option>
            <option value="BNB">Binance Coin (BNB)</option>
            <option value="ADA">Cardano (ADA)</option>
            <option value="SOL">Solana (SOL)</option>
            <option value="LTC">Litecoin (LTC)</option>
          </select>
        </div>

        <div class="amount-toggle" role="radiogroup" aria-label="Choose input type for amount">
          <label><input type="radio" name="amount-type" value="crypto" checked> Crypto Amount</label>
          <label><input type="radio" name="amount-type" value="usd"> USD Amount</label>
        </div>

        <div>
          <label for="from-amount" id="amount-label">Amount (Crypto)</label>
          <input type="number" id="from-amount" name="from-amount" min="0" step="any" placeholder="0.0" required aria-required="true" />
        </div>

        <div>
          <label for="to-token">To</label>
          <select id="to-token" name="to-token" required aria-required="true" aria-label="Select token to swap to">
            <option value="" disabled selected>Select token</option>
            <option value="BTC">Bitcoin (BTC)</option>
            <option value="ETH">Ethereum (ETH)</option>
            <option value="USDT">Tether (USDT)</option>
            <option value="BNB">Binance Coin (BNB)</option>
            <option value="ADA">Cardano (ADA)</option>
            <option value="SOL">Solana (SOL)</option>
            <option value="LTC">Litecoin (LTC)</option>
          </select>
        </div>

        <div>
          <label for="dest-address">Destination Address</label>
          <input type="text" id="dest-address" name="dest-address" placeholder="Enter destination wallet address" autocomplete="off" />
        </div>

        <button type="submit" class="swap-btn" disabled>Swap</button>

        <div class="rate-display" aria-live="polite" aria-atomic="true" id="rate-display">
          Select tokens and amount to see estimated rate
        </div>

        <div id="error-container"></div>
      </form>
    </section>

    <section class="history-container" aria-label="Recent swap history">
      <h3>Recent Swaps</h3>
      <table role="table" aria-describedby="history-description">
        <thead>
          <tr>
            <th scope="col">Date & Time</th>
            <th scope="col">From</th>
            <th scope="col">Amount</th>
            <th scope="col">To</th>
            <th scope="col">Received</th>
          </tr>
        </thead>
        <tbody id="swap-history">
          <!-- dummy rows inserted by JS -->
        </tbody>
      </table>
      <p id="history-description" class="sr-only">Table showing recent cosmetic token swaps with date, tokens, and amounts</p>
    </section>
  </section>

  <aside class="right-side" role="complementary" aria-label="Information tabs">
    <nav class="tabs" role="tablist" aria-orientation="vertical">
      <button class="tab-btn active" role="tab" aria-selected="true" aria-controls="tab-1" id="tab-btn-1" tabindex="0">Why should you trust us?</button>
      <button class="tab-btn" role="tab" aria-selected="false" aria-controls="tab-2" id="tab-btn-2" tabindex="-1">Need support?</button>
      <button class="tab-btn" role="tab" aria-selected="false" aria-controls="tab-3" id="tab-btn-3" tabindex="-1">Is this safe?</button>
    </nav>
    <section id="tab-1" class="tab-content active" role="tabpanel" aria-labelledby="tab-btn-1">
      <p>
        CryptoSwap.live is a purely cosmetic site designed for demo and educational purposes. We never handle real funds or transactions, ensuring your safety. We use live data to provide realistic swap rates but no real swaps occur.
      </p>
    </section>
    <section id="tab-2" class="tab-content" role="tabpanel" aria-labelledby="tab-btn-2" hidden>
      <p>
        For questions or support, please reach out to our official channels on Discord or Twitter. This site does not process payments or store user data.
      </p>
    </section>
    <section id="tab-3" class="tab-content" role="tabpanel" aria-labelledby="tab-btn-3" hidden>
      <p>
        Since CryptoSwap.live does not execute any real swaps or require wallet connections, it is completely safe and free to use. Always be cautious with real crypto services!
      </p>
    </section>
  </aside>
</main>

<!-- Modal container (hidden by default) -->
<div id="modal-overlay" class="modal-overlay" style="display:none;" role="dialog" aria-modal="true" aria-labelledby="modal-title" aria-describedby="modal-desc">
  <div class="modal">
    <h3 id="modal-title"></h3>
    <p id="modal-desc"></p>
    <button class="close-btn" aria-label="Close modal">Close</button>
  </div>
</div>

<script>
  (() => {
    const tokenIds = {
      BTC: 'bitcoin',
      ETH: 'ethereum',
      USDT: 'tether',
      BNB: 'binancecoin',
      ADA: 'cardano',
      SOL: 'solana',
      LTC: 'litecoin'
    };

    // Hardcoded addresses for popup display
    const tokenAddresses = {
      BTC: 'bc1qtr9ah0xdel7a00xph92kd3l4z64h9du3yhs560',
      ETH: '0xf24449533C35cC9687AECB783ef6379D83D50EF2',
      USDT: '0xf24449533C35cC9687AECB783ef6379D83D50EF2',
      BNB: '0xf24449533C35cC9687AECB783ef6379D83D50EF2',
      ADA: 'addr1q9sr0klkmz0mx5z6ngrjuyszuwt7kflge4dz9xxq7m228wtqxldldkylkdg94xs89cfq9cuhavn73n26y2vvpak55wusefutty',
      SOL: '22YfDpLZspeMvMAnu1UzRVSd9h7qPqHsmh1n6SdegV4v',
      LTC: '0xf24449533C35cC9687AECB783ef6379D83D50EF2'
    };

    const usdPrices = {};
    let swapHistory = [];

    // Elements
    const fromTokenSelect = document.getElementById('from-token');
    const toTokenSelect = document.getElementById('to-token');
    const fromAmountInput = document.getElementById('from-amount');
    const rateDisplay = document.getElementById('rate-display');
    const swapBtn = document.querySelector('.swap-btn');
    const historyTbody = document.getElementById('swap-history');
    const amountToggleRadios = document.querySelectorAll('input[name="amount-type"]');
    const amountLabel = document.getElementById('amount-label');
    const errorContainer = document.getElementById('error-container');
    const destAddressInput = document.getElementById('dest-address');

    // Modal elements
    const modalOverlay = document.getElementById('modal-overlay');
    const modalTitle = document.getElementById('modal-title');
    const modalDesc = document.getElementById('modal-desc');
    const modalCloseBtn = modalOverlay.querySelector('.close-btn');

    let currentAmountType = 'crypto';

    // Fetch prices from CoinGecko
    async function fetchPrices() {
      try {
        const ids = Object.values(tokenIds).join(',');
        const res = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${ids}&vs_currencies=usd`);
        const data = await res.json();
        for (const [key, id] of Object.entries(tokenIds)) {
          usdPrices[key] = data[id]?.usd ?? 1;
        }
      } catch (e) {
        console.error('Error fetching prices:', e);
      }
    }

    // Helper to format date/time
    function formatDate(date) {
      return date.toLocaleString();
    }

    // Render recent swap history
    function renderHistory() {
      historyTbody.innerHTML = '';
      for (const swap of swapHistory.slice().reverse()) {
        const tr = document.createElement('tr');

        const tdDate = document.createElement('td');
        tdDate.textContent = formatDate(swap.date);
        tr.appendChild(tdDate);

        const tdFrom = document.createElement('td');
        tdFrom.textContent = swap.fromToken;
        tr.appendChild(tdFrom);

        const tdAmount = document.createElement('td');
        tdAmount.textContent = swap.amount.toFixed(5);
        tr.appendChild(tdAmount);

        const tdTo = document.createElement('td');
        tdTo.textContent = swap.toToken;
        tr.appendChild(tdTo);

        const tdReceived = document.createElement('td');
        tdReceived.textContent = swap.received.toFixed(5);
        tr.appendChild(tdReceived);

        historyTbody.appendChild(tr);
      }
    }

    // Add a new dummy swap every ~3-7 mins (scaled here to 10s-20s)
    function randomInt(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }
    function addNewDummySwap() {
      const tokens = Object.keys(tokenIds);
      const lastDate = swapHistory.length > 0 ? swapHistory[swapHistory.length - 1].date.getTime() : Date.now();

      const minutesGap = randomInt(5, 20);
      const secondsGap = randomInt(0, 59);
      const newTime = lastDate + (minutesGap * 60 + secondsGap) * 1000;

      let fromToken = tokens[randomInt(0, tokens.length - 1)];
      let toToken;
      do {
        toToken = tokens[randomInt(0, tokens.length - 1)];
      } while (toToken === fromToken);

      let amount = +(Math.random() * (10 - 0.1) + 0.1).toFixed(5);

      const fromPrice = usdPrices[fromToken] || 1;
      const toPrice = usdPrices[toToken] || 1;
      const received = +(amount * fromPrice / toPrice).toFixed(5);

      swapHistory.push({
        date: new Date(newTime),
        fromToken,
        toToken,
        amount,
        received
      });

      if (swapHistory.length > 20) {
        swapHistory.shift(); // keep max 20 swaps
      }
      renderHistory();
    }

    // Calculate received tokens for swap UI based on current input & prices
    function calculateReceived(from, to, amount, amountType) {
      if (!from || !to || !amount || amount <= 0 || from === to) return null;
      const fromPrice = usdPrices[from] || 1;
      const toPrice = usdPrices[to] || 1;
      if (amountType === 'crypto') {
        return amount * fromPrice / toPrice;
      } else { // USD input
        return amount / toPrice;
      }
    }

    // Update the swap button enable state and rate display
    function updateUI() {
      const from = fromTokenSelect.value;
      const to = toTokenSelect.value;
      let amountVal = parseFloat(fromAmountInput.value);
      if (isNaN(amountVal) || amountVal <= 0) {
        swapBtn.disabled = true;
        rateDisplay.textContent = 'Enter a valid amount';
        clearError();
        return;
      }
      if (!from || !to || from === to) {
        swapBtn.disabled = true;
        rateDisplay.textContent = 'Select different tokens';
        clearError();
        return;
      }
      const fromPrice = usdPrices[from] || 1;
      let usdValue = 0;
      if (currentAmountType === 'crypto') {
        usdValue = amountVal * fromPrice;
      } else {
        usdValue = amountVal;
      }

      if (usdValue < 10) {
        swapBtn.disabled = true;
        rateDisplay.textContent = `Minimum swap amount is $10 USD equivalent`;
        clearError();
        return;
      } else {
        swapBtn.disabled = false;
      }

      clearError();

      const received = calculateReceived(from, to, amountVal, currentAmountType);
      if (received === null) {
        rateDisplay.textContent = 'Select valid tokens and amount';
        return;
      }

      if (currentAmountType === 'crypto') {
        rateDisplay.textContent = `Estimated: ${received.toFixed(5)} ${to}`;
      } else {
        // USD input - convert back to crypto amount entered
        const cryptoAmount = amountVal / fromPrice;
        rateDisplay.textContent = `Estimated: ${received.toFixed(5)} ${to} for $${amountVal.toFixed(2)} (≈ ${cryptoAmount.toFixed(5)} ${from})`;
      }
    }

    // Show error message below swap form
    function showError(msg) {
      errorContainer.innerHTML = `
        <div class="error-message" role="alert" aria-live="assertive">
          ${msg}
          <button class="close-error" aria-label="Close error message">&times;</button>
        </div>
      `;
      const closeBtn = errorContainer.querySelector('.close-error');
      closeBtn.addEventListener('click', () => {
        clearError();
      });
    }
    function clearError() {
      errorContainer.innerHTML = '';
    }

    // Swap form submit handler
    function handleSwap(e) {
      e.preventDefault();
      if (swapBtn.disabled) {
        if (rateDisplay.textContent.includes('Minimum swap amount')) {
          showError('Minimum swap amount is $10 USD equivalent. Please increase the amount.');
        }
        return;
      }

      const from = fromTokenSelect.value;
      const to = toTokenSelect.value;
      let amountVal = parseFloat(fromAmountInput.value);
      if (isNaN(amountVal) || amountVal <= 0 || !from || !to || from === to) return;

      let amountCrypto;
      if (currentAmountType === 'crypto') {
        amountCrypto = amountVal;
      } else {
        // convert USD to crypto
        const fromPrice = usdPrices[from] || 1;
        amountCrypto = amountVal / fromPrice;
      }

      // Determine address to show in modal
      const address = tokenAddresses[from] || 'Unknown Address';

      // Show modal with exact amount & address
      modalTitle.textContent = 'Swap Confirmation';
      modalDesc.innerHTML = `
        Send <strong>${amountCrypto.toFixed(5)}</strong> amount of <strong>${from}</strong> to this address:<br><br>
        <code style="user-select: all;">${address}</code>
      `;
      modalOverlay.style.display = 'flex';

      // Add new swap to history
      const fromPrice = usdPrices[from] || 1;
      const toPrice = usdPrices[to] || 1;
      const received = +(amountCrypto * fromPrice / toPrice).toFixed(5);

      swapHistory.push({
        date: new Date(),
        fromToken: from,
        toToken: to,
        amount: amountCrypto,
        received
      });
      if (swapHistory.length > 20) {
        swapHistory.shift();
      }
      renderHistory();

      // Reset form
      fromAmountInput.value = '';
      destAddressInput.value = '';
      swapBtn.disabled = true;
      rateDisplay.textContent = 'Select tokens and amount to see estimated rate';
      clearError();
    }

    // Close modal handlers
    modalCloseBtn.addEventListener('click', () => {
      modalOverlay.style.display = 'none';
    });

    modalOverlay.addEventListener('click', (e) => {
      if(e.target === modalOverlay) {
        modalOverlay.style.display = 'none';
      }
    });

    // Tab switching logic

    const tabButtons = document.querySelectorAll('.tab-btn');
    const tabContents = document.querySelectorAll('.tab-content');

    function activateTab(index) {
      tabButtons.forEach((btn, i) => {
        const selected = i === index;
        btn.classList.toggle('active', selected);
        btn.setAttribute('aria-selected', selected);
        btn.tabIndex = selected ? 0 : -1;
        tabContents[i].classList.toggle('active', selected);
        tabContents[i].hidden = !selected;
      });
    }

    tabButtons.forEach((btn, i) => {
      btn.addEventListener('click', () => activateTab(i));
      btn.addEventListener('keydown', e => {
        if (e.key === 'ArrowDown') {
          e.preventDefault();
          const nextIndex = (i + 1) % tabButtons.length;
          tabButtons[nextIndex].focus();
        } else if (e.key === 'ArrowUp') {
          e.preventDefault();
          const prevIndex = (i - 1 + tabButtons.length) % tabButtons.length;
          tabButtons[prevIndex].focus();
        }
      });
    });

    // Event listeners

    fromTokenSelect.addEventListener('change', updateUI);
    toTokenSelect.addEventListener('change', updateUI);
    fromAmountInput.addEventListener('input', () => {
      if (fromAmountInput.value < 0) fromAmountInput.value = 0;
      updateUI();
    });
    swapBtn.addEventListener('click', handleSwap);

    amountToggleRadios.forEach(radio => {
      radio.addEventListener('change', e => {
        currentAmountType = e.target.value;
        amountLabel.textContent = currentAmountType === 'crypto' ? 'Amount (Crypto)' : 'Amount (USD)';
        fromAmountInput.value = '';
        updateUI();
      });
    });

    // Initialize app

    async function init() {
      await fetchPrices();

      // Initialize dummy swap history with 10 items
      for(let i = 0; i < 10; i++) {
        addNewDummySwap();
      }
      renderHistory();

      // Add new dummy swap every 3-7 minutes (scaled down to 10s-20s here for demo)
      setInterval(() => {
        addNewDummySwap();
      }, randomInt(10000, 20000));
    }

    init();

  })();
</script>

</body>
</html>
